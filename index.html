<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<p>lottery</p>

		<textarea form="usrform" name="name" id="textareaID"></textarea
		><br /><br />

		<input type="button" onclick="onSubmit()" value="Submit form" />

		<div id="sum">sum = 0</div>
		<div id="20per">20% = 0</div>

		<script>
			const onSubmit = () => {
				const data = document.getElementById("textareaID").value;

				const deleteN = data.split("\n");
				let sum = 0;
				for (let i = 0; i < deleteN.length; i++) {
					const num = deleteN[i];

					if (num.includes("=")) {
						const eachNum = num.split("=").pop();
						let end = 0;
						if (eachNum.includes("*")) {
							const splitEachNum = eachNum.split("*");
							for (let j = 0; j < splitEachNum.length; j++) {
								const n = +splitEachNum[j];
								end += n;
							}
						} else {
							end = eachNum;
						}
						if (+end) {
							sum += +end;
						}
					} else {
						if (+num) {
							sum += +num;
						}
					}
				}

				const sumInput = document.getElementById("sum");
				sumInput.innerHTML = "sum = " + sum;

				const sumPercent = document.getElementById("20per");

				const sumStr = sum.toString();
				const lastTwoZero = `${sumStr.substring(
					0,
					sumStr.length - 2
				)}00`;

				const tax = +lastTwoZero * 0.2;

				sumPercent.innerHTML = "20% = " + (sum - tax);
			};
		</script>
	</body>
</html>

<!-- 16/7/65 พี่ฟ้าง 780-20%=640 -->

<!-- บน
472=20*20
174=20*20
521=20*20
99=30
67=30
76=30
98=30
89=30
14=30
41=30
42=30
24=30
21=30
12=30

ล่าง
99=30
67=30
76=30
98=30
89=30
14=30
41=30
42=30
24=30
21=30
12=30 
-->
